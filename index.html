<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>기자 아카이브 & KPI 대시보드</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- jsPDF for PDF export -->
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <i class="fas fa-lock"></i>
                <h1>횽's 아카이브</h1>
                <p>비밀번호를 입력하여 로그인하세요</p>
            </div>
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="passwordInput">
                        <i class="fas fa-key"></i> 비밀번호
                    </label>
                    <input 
                        type="password" 
                        id="passwordInput" 
                        placeholder="비밀번호를 입력하세요"
                        required
                        autocomplete="current-password"
                    >
                </div>
                <button type="submit" class="btn-login">
                    <i class="fas fa-sign-in-alt"></i>
                    로그인
                </button>
                <div id="loginError" class="login-error"></div>
            </form>
            <div class="login-info">
                <p><i class="fas fa-info-circle"></i> 초기 비밀번호: <strong>journalist2025</strong></p>
                <p style="font-size: 0.85rem; color: #94a3b8; margin-top: 0.5rem;">
                    로그인 후 설정에서 비밀번호를 변경하실 수 있습니다.
                </p>
            </div>
        </div>
    </div>

    <!-- Main App (Hidden until login) -->
    <div id="mainApp" class="main-app hidden">
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-newspaper"></i>
                    <h1>횽's 아카이브</h1>
                </div>
                <nav class="nav-menu">
                    <button class="nav-btn active" data-view="dashboard">
                        <i class="fas fa-chart-line"></i>
                        <span>대시보드</span>
                    </button>
                    <button class="nav-btn" data-view="articles">
                        <i class="fas fa-archive"></i>
                        <span>기사 관리</span>
                    </button>
                    <button class="nav-btn" data-view="portfolio">
                        <i class="fas fa-folder-open"></i>
                        <span>포트폴리오</span>
                    </button>
                    <button class="btn-primary" id="newArticleBtn">
                        <i class="fas fa-plus"></i>
                        <span>새 기사 등록</span>
                    </button>
                    <button class="btn-secondary" id="dataManageBtn">
                        <i class="fas fa-database"></i>
                        <span>데이터 관리</span>
                    </button>
                    <button class="btn-secondary" id="settingsBtn">
                        <i class="fas fa-cog"></i>
                        <span>설정</span>
                    </button>
                    <button class="btn-logout" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>로그아웃</span>
                    </button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            
            <!-- Dashboard View -->
            <section id="dashboardView" class="view-section active">
                <div class="section-header">
                    <h2><i class="fas fa-chart-line"></i> KPI 대시보드</h2>
                    <div class="date-filter">
                        <select id="yearFilter">
                            <option value="all">전체 기간</option>
                        </select>
                        <select id="monthFilter">
                            <option value="all">전체 월</option>
                            <option value="1">1월</option>
                            <option value="2">2월</option>
                            <option value="3">3월</option>
                            <option value="4">4월</option>
                            <option value="5">5월</option>
                            <option value="6">6월</option>
                            <option value="7">7월</option>
                            <option value="8">8월</option>
                            <option value="9">9월</option>
                            <option value="10">10월</option>
                            <option value="11">11월</option>
                            <option value="12">12월</option>
                        </select>
                    </div>
                </div>

                <!-- KPI Cards -->
                <div class="kpi-cards">
                    <div class="kpi-card">
                        <div class="kpi-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <i class="fas fa-newspaper"></i>
                        </div>
                        <div class="kpi-content">
                            <h3>전체 기사</h3>
                            <p class="kpi-value" id="totalArticles">0</p>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="kpi-content">
                            <h3>1면 기사</h3>
                            <p class="kpi-value" id="frontPageArticles">0</p>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="kpi-content">
                            <h3>면톱 기사</h3>
                            <p class="kpi-value" id="sectionTopArticles">0</p>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <div class="kpi-content">
                            <h3>기획 기사</h3>
                            <p class="kpi-value" id="specialArticles">0</p>
                        </div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="charts-grid">
                    <div class="chart-container">
                        <h3><i class="fas fa-chart-bar"></i> KPI 유형별 통계</h3>
                        <div class="chart-wrapper" style="height: 350px;">
                            <canvas id="kpiChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-container">
                        <h3><i class="fas fa-chart-pie"></i> 주제 분야별 분포</h3>
                        <div class="chart-wrapper" style="height: 350px;">
                            <canvas id="subjectChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-container full-width">
                        <h3><i class="fas fa-chart-line"></i> 월별 기사 작성 추이</h3>
                        <div class="chart-wrapper" style="height: 350px;">
                            <canvas id="monthlyChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Recent Articles -->
                <div class="recent-articles">
                    <h3><i class="fas fa-clock"></i> 최근 등록 기사</h3>
                    <div id="recentArticlesList" class="articles-list"></div>
                </div>
            </section>

            <!-- Articles View -->
            <section id="articlesView" class="view-section">
                <div class="section-header">
                    <h2><i class="fas fa-archive"></i> 기사 아카이브</h2>
                    <div class="search-filters">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="searchInput" placeholder="제목, 키워드 검색...">
                        </div>
                        <select id="subjectFilter" class="filter-select">
                            <option value="all">전체 분야</option>
                            <option value="조선">조선</option>
                            <option value="항공">항공</option>
                            <option value="해운">해운</option>
                            <option value="방산">방산</option>
                            <option value="정유">정유</option>
                            <option value="석유화학">석유화학</option>
                            <option value="재계">재계</option>
                            <option value="반도체">반도체</option>
                            <option value="자동차">자동차</option>
                            <option value="통상정책">통상정책</option>
                            <option value="노사관계">노사관계</option>
                        </select>
                        <select id="kpiFilter" class="filter-select">
                            <option value="all">전체 유형</option>
                            <option value="1면">1면</option>
                            <option value="앞면">앞면</option>
                            <option value="면톱">면톱</option>
                            <option value="게시판톱">게시판톱</option>
                            <option value="기획">기획</option>
                            <option value="일반">일반</option>
                        </select>
                        <select id="sortBy" class="filter-select">
                            <option value="date_desc">최신순</option>
                            <option value="date_asc">오래된순</option>
                            <option value="title">제목순</option>
                        </select>
                    </div>
                </div>

                <div id="articlesListContainer" class="articles-grid"></div>
                
                <div class="pagination" id="pagination"></div>
            </section>

            <!-- Portfolio View -->
            <section id="portfolioView" class="view-section">
                <div class="section-header">
                    <h2><i class="fas fa-folder-open"></i> 포트폴리오</h2>
                    <button class="btn-secondary" id="exportPdfBtn">
                        <i class="fas fa-file-pdf"></i>
                        <span>PDF 내보내기</span>
                    </button>
                </div>

                <div class="portfolio-content" id="portfolioContent">
                    <div class="portfolio-header">
                        <h1>기자 포트폴리오</h1>
                        <div class="portfolio-info">
                            <p><strong>이름:</strong> <span id="portfolioName">경제신문 기자</span></p>
                            <p><strong>경력:</strong> <span id="portfolioExperience">10년차</span></p>
                            <p><strong>전문 분야:</strong> <span id="portfolioFields">조선·항공·해운·방산·정유·석유화학·재계·반도체·자동차·통상정책·노사관계</span></p>
                        </div>
                    </div>

                    <div class="portfolio-summary">
                        <h2>기사 작성 실적</h2>
                        <div class="summary-stats" id="portfolioStats"></div>
                    </div>

                    <div class="portfolio-highlights">
                        <h2>주요 기사</h2>
                        <div id="portfolioHighlights"></div>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <!-- Modal: New Article Form -->
    <div id="articleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle"><i class="fas fa-plus-circle"></i> 새 기사 등록</h2>
                <button class="close-btn" id="closeModalBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="articleForm">
                <div class="form-group">
                    <label for="articleTitle"><i class="fas fa-heading"></i> 제목 *</label>
                    <input type="text" id="articleTitle" required placeholder="기사 제목을 입력하세요">
                </div>

                <div class="form-group">
                    <label for="articleContent"><i class="fas fa-file-alt"></i> 본문 *</label>
                    <textarea id="articleContent" required placeholder="기사 본문을 입력하세요" rows="10"></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="publishDate"><i class="fas fa-calendar"></i> 게재 날짜 *</label>
                        <input type="date" id="publishDate" required>
                    </div>
                    <div class="form-group">
                        <label for="keywords"><i class="fas fa-tags"></i> 키워드</label>
                        <input type="text" id="keywords" placeholder="쉼표로 구분 (예: 조선, 수출, 한화오션)">
                    </div>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-briefcase"></i> 주제 분야 태그 *</label>
                    <div class="tag-group" id="subjectTagsGroup">
                        <label class="tag-checkbox">
                            <input type="checkbox" name="subjectTag" value="조선">
                            <span>조선</span>
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="subjectTag" value="항공">
                            <span>항공</span>
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="subjectTag" value="해운">
                            <span>해운</span>
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="subjectTag" value="방산">
                            <span>방산</span>
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="subjectTag" value="정유">
                            <span>정유</span>
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="subjectTag" value="석유화학">
                            <span>석유화학</span>
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="subjectTag" value="재계">
                            <span>재계</span>
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="subjectTag" value="반도체">
                            <span>반도체</span>
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="subjectTag" value="자동차">
                            <span>자동차</span>
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="subjectTag" value="통상정책">
                            <span>통상정책</span>
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="subjectTag" value="노사관계">
                            <span>노사관계</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-star"></i> KPI 유형 태그 *</label>
                    <div class="tag-group" id="kpiTagsGroup">
                        <label class="tag-checkbox">
                            <input type="checkbox" name="kpiTag" value="1면">
                            <span>1면</span>
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="kpiTag" value="앞면">
                            <span>앞면</span>
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="kpiTag" value="면톱">
                            <span>면톱</span>
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="kpiTag" value="게시판톱">
                            <span>게시판톱</span>
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="kpiTag" value="기획">
                            <span>기획</span>
                        </label>
                        <label class="tag-checkbox">
                            <input type="checkbox" name="kpiTag" value="일반">
                            <span>일반</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="notes"><i class="fas fa-sticky-note"></i> 메모</label>
                    <textarea id="notes" placeholder="추가 메모사항을 입력하세요" rows="3"></textarea>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="cancelBtn">취소</button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> 저장
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal: Article Detail View -->
    <div id="articleDetailModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2><i class="fas fa-file-alt"></i> 기사 상세</h2>
                <button class="close-btn" id="closeDetailModalBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="articleDetailContent"></div>
            <div class="modal-actions">
                <button class="btn-secondary" id="shareArticleBtn">
                    <i class="fas fa-share-alt"></i> 공유
                </button>
                <button class="btn-secondary" id="editArticleBtn">
                    <i class="fas fa-edit"></i> 수정
                </button>
                <button class="btn-danger" id="deleteArticleBtn">
                    <i class="fas fa-trash"></i> 삭제
                </button>
            </div>
        </div>
    </div>

    <!-- Modal: Share Article -->
    <div id="shareModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-share-alt"></i> 기사 공유</h2>
                <button class="close-btn" id="closeShareBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div style="padding: var(--spacing-md);">
                <p style="color: #64748b; margin-bottom: var(--spacing-md);">
                    아래 링크를 복사하여 다른 사람과 이 기사를 공유할 수 있습니다.
                    <br>
                    <strong>읽기 전용</strong>으로 공유되며, 수정은 불가능합니다.
                </p>
                <div class="share-link-container">
                    <input type="text" id="shareLinkInput" readonly>
                    <button class="btn-primary" id="copyLinkBtn">
                        <i class="fas fa-copy"></i> 복사
                    </button>
                </div>
                <div style="margin-top: var(--spacing-md); padding: var(--spacing-sm); background: #fef3c7; border-radius: 8px;">
                    <p style="color: #92400e; font-size: 0.9rem; margin: 0;">
                        <i class="fas fa-info-circle"></i> 
                        이 링크를 가진 사람은 누구나 기사를 볼 수 있습니다.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Data Management -->
    <div id="dataManageModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-database"></i> 데이터 관리</h2>
                <button class="close-btn" id="closeDataManageBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div style="padding: var(--spacing-md);">
                <p style="color: #64748b; margin-bottom: var(--spacing-lg);">
                    기사 데이터를 내보내거나 백업 파일을 복원할 수 있습니다.
                </p>

                <!-- 스마트 내보내기 (NEW!) -->
                <div class="data-action-section" style="background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%); padding: var(--spacing-md); border-radius: 8px; border: 2px solid #667eea;">
                    <h3><i class="fas fa-brain"></i> 스마트 내보내기 (AI 분석용)</h3>
                    <p style="margin-bottom: var(--spacing-md);">대용량 파일 문제를 해결! 월별/분기별로 분할하거나 경량 모드로 내보냅니다.</p>
                    
                    <div class="form-group" style="margin-bottom: var(--spacing-md);">
                        <label><strong>내보내기 방식 선택</strong></label>
                        <select id="smartExportMode" class="filter-select" style="margin-bottom: var(--spacing-sm);">
                            <option value="csv-full">CSV 전체 (초경량, AI 분석 최적!)</option>
                            <option value="csv-monthly">CSV 월별 분할</option>
                            <option value="monthly">JSON 월별 분할</option>
                            <option value="quarterly">JSON 분기별 분할</option>
                            <option value="lightweight">JSON 경량 모드 (본문 제외)</option>
                            <option value="monthly-lightweight">JSON 월별 + 경량</option>
                        </select>
                        <small style="color: #059669; font-weight: 600;">
                            <i class="fas fa-star"></i> CSV는 JSON보다 80% 더 가볍습니다!
                        </small>
                    </div>

                    <div id="smartExportOptions">
                        <!-- 월별/분기별 선택 -->
                        <div id="periodSelector" class="form-group">
                            <label><strong>기간 선택</strong></label>
                            <select id="smartExportYear" class="filter-select" style="margin-bottom: var(--spacing-sm);">
                                <option value="all">전체 연도</option>
                            </select>
                            <div id="monthSelector" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.5rem; margin-top: var(--spacing-sm);">
                                <label class="month-checkbox">
                                    <input type="checkbox" name="exportMonth" value="1" checked>
                                    <span>1월</span>
                                </label>
                                <label class="month-checkbox">
                                    <input type="checkbox" name="exportMonth" value="2" checked>
                                    <span>2월</span>
                                </label>
                                <label class="month-checkbox">
                                    <input type="checkbox" name="exportMonth" value="3" checked>
                                    <span>3월</span>
                                </label>
                                <label class="month-checkbox">
                                    <input type="checkbox" name="exportMonth" value="4" checked>
                                    <span>4월</span>
                                </label>
                                <label class="month-checkbox">
                                    <input type="checkbox" name="exportMonth" value="5" checked>
                                    <span>5월</span>
                                </label>
                                <label class="month-checkbox">
                                    <input type="checkbox" name="exportMonth" value="6" checked>
                                    <span>6월</span>
                                </label>
                                <label class="month-checkbox">
                                    <input type="checkbox" name="exportMonth" value="7" checked>
                                    <span>7월</span>
                                </label>
                                <label class="month-checkbox">
                                    <input type="checkbox" name="exportMonth" value="8" checked>
                                    <span>8월</span>
                                </label>
                                <label class="month-checkbox">
                                    <input type="checkbox" name="exportMonth" value="9" checked>
                                    <span>9월</span>
                                </label>
                                <label class="month-checkbox">
                                    <input type="checkbox" name="exportMonth" value="10" checked>
                                    <span>10월</span>
                                </label>
                                <label class="month-checkbox">
                                    <input type="checkbox" name="exportMonth" value="11" checked>
                                    <span>11월</span>
                                </label>
                                <label class="month-checkbox">
                                    <input type="checkbox" name="exportMonth" value="12" checked>
                                    <span>12월</span>
                                </label>
                            </div>
                            <div id="quarterSelector" style="display: none; grid-template-columns: repeat(2, 1fr); gap: 0.5rem; margin-top: var(--spacing-sm);">
                                <label class="month-checkbox">
                                    <input type="checkbox" name="exportQuarter" value="Q1" checked>
                                    <span>1분기 (1-3월)</span>
                                </label>
                                <label class="month-checkbox">
                                    <input type="checkbox" name="exportQuarter" value="Q2" checked>
                                    <span>2분기 (4-6월)</span>
                                </label>
                                <label class="month-checkbox">
                                    <input type="checkbox" name="exportQuarter" value="Q3" checked>
                                    <span>3분기 (7-9월)</span>
                                </label>
                                <label class="month-checkbox">
                                    <input type="checkbox" name="exportQuarter" value="Q4" checked>
                                    <span>4분기 (10-12월)</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div style="background: #e0f2fe; padding: var(--spacing-sm); border-radius: 6px; margin: var(--spacing-md) 0; font-size: 0.85rem; color: #0369a1;">
                        <i class="fas fa-info-circle"></i>
                        <strong>팁:</strong> "월별 분할"을 선택하면 각 월마다 별도 파일로 다운로드됩니다. AI가 처리하기 좋은 크기입니다!
                    </div>

                    <button class="btn-primary" id="smartExportBtn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <i class="fas fa-magic"></i>
                        스마트 내보내기 시작
                    </button>
                </div>

                <hr style="margin: var(--spacing-lg) 0; border: none; border-top: 2px solid var(--gray-200);">

                <!-- 전체 내보내기 -->
                <div class="data-action-section">
                    <h3><i class="fas fa-download"></i> 전체 데이터 내보내기</h3>
                    <p>모든 기사를 JSON 파일로 다운로드합니다.</p>
                    <button class="btn-primary" id="exportAllBtn">
                        <i class="fas fa-file-download"></i>
                        전체 내보내기 (JSON)
                    </button>
                </div>

                <hr style="margin: var(--spacing-lg) 0; border: none; border-top: 2px solid var(--gray-200);">

                <!-- 필터링 내보내기 -->
                <div class="data-action-section">
                    <h3><i class="fas fa-filter"></i> 필터링 내보내기</h3>
                    <p>특정 조건의 기사만 선택하여 내보냅니다.</p>
                    
                    <div class="form-row" style="margin-bottom: var(--spacing-sm);">
                        <div class="form-group">
                            <label>주제 분야</label>
                            <select id="exportSubjectFilter" class="filter-select">
                                <option value="all">전체 분야</option>
                                <option value="조선">조선</option>
                                <option value="항공">항공</option>
                                <option value="해운">해운</option>
                                <option value="방산">방산</option>
                                <option value="정유">정유</option>
                                <option value="석유화학">석유화학</option>
                                <option value="재계">재계</option>
                                <option value="반도체">반도체</option>
                                <option value="자동차">자동차</option>
                                <option value="통상정책">통상정책</option>
                                <option value="노사관계">노사관계</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>KPI 유형</label>
                            <select id="exportKpiFilter" class="filter-select">
                                <option value="all">전체 유형</option>
                                <option value="1면">1면</option>
                                <option value="앞면">앞면</option>
                                <option value="면톱">면톱</option>
                                <option value="게시판톱">게시판톱</option>
                                <option value="기획">기획</option>
                                <option value="일반">일반</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row" style="margin-bottom: var(--spacing-md);">
                        <div class="form-group">
                            <label>시작 날짜</label>
                            <input type="date" id="exportStartDate" class="filter-select">
                        </div>
                        <div class="form-group">
                            <label>종료 날짜</label>
                            <input type="date" id="exportEndDate" class="filter-select">
                        </div>
                    </div>
                    
                    <button class="btn-primary" id="exportFilteredBtn">
                        <i class="fas fa-file-download"></i>
                        필터링 내보내기 (JSON)
                    </button>
                </div>

                <hr style="margin: var(--spacing-lg) 0; border: none; border-top: 2px solid var(--gray-200);">

                <!-- 데이터 가져오기 -->
                <div class="data-action-section">
                    <h3><i class="fas fa-upload"></i> 데이터 가져오기 (복원)</h3>
                    <p>백업한 JSON 파일을 업로드하여 데이터를 복원합니다.</p>
                    <div style="background: #fef3c7; padding: var(--spacing-sm); border-radius: 8px; margin-bottom: var(--spacing-sm);">
                        <p style="color: #92400e; font-size: 0.9rem; margin: 0;">
                            <i class="fas fa-exclamation-triangle"></i> 
                            <strong>주의:</strong> 가져오기 시 기존 데이터와 병합됩니다. 중복 ID는 건너뜁니다.
                        </p>
                    </div>
                    <input type="file" id="importFileInput" accept=".json" style="display: none;">
                    <button class="btn-secondary" id="importDataBtn">
                        <i class="fas fa-file-upload"></i>
                        파일 선택 및 가져오기
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Settings -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-cog"></i> 설정</h2>
                <button class="close-btn" id="closeSettingsBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="settingsForm">
                <div class="form-group">
                    <label for="currentPassword">
                        <i class="fas fa-lock"></i> 현재 비밀번호
                    </label>
                    <input type="password" id="currentPassword" required>
                </div>
                <div class="form-group">
                    <label for="newPassword">
                        <i class="fas fa-key"></i> 새 비밀번호
                    </label>
                    <input type="password" id="newPassword" required minlength="6">
                    <small style="color: #64748b;">최소 6자 이상 입력하세요</small>
                </div>
                <div class="form-group">
                    <label for="confirmPassword">
                        <i class="fas fa-check"></i> 비밀번호 확인
                    </label>
                    <input type="password" id="confirmPassword" required minlength="6">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="cancelSettingsBtn">취소</button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> 비밀번호 변경
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner hidden">
        <div class="spinner"></div>
        <p>처리 중입니다...</p>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>
    </div><!-- End of mainApp -->

    <!-- Custom JavaScript -->
    <script src="js/auth.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
